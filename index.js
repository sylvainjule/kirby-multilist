(function () {var b;function c(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var d={props:(b={label:String,disabled:Boolean,help:String,parent:String,empty:String,name:[String,Number],required:Boolean,type:String,duplicate:{type:Boolean,default:!0}},c(b,"empty",String),c(b,"fields",Object),c(b,"limit",Number),c(b,"max",Number),c(b,"min",Number),c(b,"prepend",{type:Boolean,default:!1}),c(b,"sortable",{type:Boolean,default:!0}),c(b,"sortBy",String),c(b,"value",{type:Array,default:function(){return[]}}),b),data:function(){return{novalidate:!1,localValue:this.value}},watch:{value:function(t){this.localValue!==t&&(this.localValue=this.sort(t))}},computed:{isEmpty:function(){return!this.localValue||!this.localValue.length},canAdd:function(){return!this.limit||!this.localValue||!this.localValue.length||this.localValue.length<this.limit},isSortable:function(){return this.sortable&&this.localValue.length>1},defaultItem:function(){var t=this,e={};return Object.keys(this.fields).forEach(function(a){var r=t.fields[a];null!==r.default&&void 0!==r.default?e[a]=t.$helper.clone(r.default):e[a]=null}),e},dragOptions:function(){return{disabled:!this.isSortable,fallbackClass:"k-sortable-row-fallback"}},lastIndex:function(){return this.localValue.length-1}},methods:{addItem:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=this.defaultItem;this.prepend?this.localValue=[a].concat(this.localValue):this.localValue.push(a),this.onInput(),e&&this.$nextTick(function(){t.setFocus()})},setFocus:function(){var t=this.prepend&&!this.autoAdd?0:this.lastIndex,e="list-"+Object.keys(this.fields)[0]+"-"+t,a=this.$refs[e];a&&a[0].focus()},removeItem:function(t){this.localValue.indexOf(t)&&this.localValue.splice(t,1),this.onInput()},onColumnInput:function(t,e,a){this.localValue[t][e]=a,this.onInput()},onInput:function(){this.$emit("input",this.localValue)},isLast:function(t){return this.localValue&&this.localValue.length>1&&t+1===this.localValue.length},hasFieldType:function(t){return this.$helper.isComponent("k-"+t+"-field")},sort:function(t){return this.sortBy?t.sortBy(this.sortBy):t},width:function(t){if(!t)return"auto";var e=t.toString().split("/");if(2!==e.length)return"auto";var a=Number(e[0]),r=Number(e[1]),l=parseFloat(100/r*a,2).toFixed(2)+"%";return"100.00%"==l?"auto":l}}};if(typeof d==="function"){d=d.options}Object.assign(d,function(){var render=function(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("k-field",_vm._b({staticClass:"k-multilist-field"},"k-field",_vm.$props,false),[_c("template",{slot:"options"},[_vm.canAdd?_c("k-button",{attrs:{"id":_vm._uid,"icon":"add"},on:{"click":_vm.addItem}},[_vm._v(" "+_vm._s(_vm.$t("add"))+" ")]):_vm._e()],1),_vm._v(" "),_vm.isEmpty?_c("k-empty",{attrs:{"icon":"list-bullet"},on:{"click":_vm.addItem}},[_vm._v(" "+_vm._s(_vm.empty||_vm.$t("field.structure.empty"))+" ")]):_c("table",{staticClass:"k-multilist-table k-structure-table",attrs:{"data-sortable":_vm.isSortable}},[_c("thead",[_c("tr",[_c("th",{staticClass:"k-structure-table-index"},[_vm._v("#")]),_vm._v(" "),_vm._l(_vm.fields,function(field,index){return _c("th",{key:index,staticClass:"k-structure-table-column",style:"width:"+_vm.width(field.width)},[_vm._v(" "+_vm._s(field.label)),field.required?_c("span",[_vm._v("*")]):_vm._e()])}),_vm._v(" "),_c("th")],2)]),_vm._v(" "),_c("k-draggable",{staticClass:"k-multilist-list",attrs:{"list":_vm.localValue,"handle":true,"element":"tbody","options":_vm.dragOptions},on:{"end":_vm.onInput}},_vm._l(_vm.localValue,function(item,index){return _c("tr",{key:index,staticClass:"k-multilist-item"},[_c("td",{class:["k-structure-table-index",{"disabled":_vm.isLast(index)}]},[_vm.isSortable&&!_vm.isLast(index)?_c("k-sort-handle"):_vm._e(),_vm._v(" "),_c("div",{staticClass:"k-structure-table-index-number"},[_vm._v(_vm._s(index+1))])],1),_vm._v(" "),_vm._l(_vm.fields,function(field,key){return _c("td",{key:key,staticClass:"k-structure-table-column multilist-field"},[_vm.hasFieldType(field.type)?_c("k-"+field.type+"-field",_vm._b({ref:"list-"+field.name+"-"+index,refInFor:true,tag:"component",attrs:{"name":key,"novalidate":_vm.novalidate,"disabled":_vm.disabled},on:{"input":function($event){return _vm.onColumnInput(index,key,$event)}},model:{value:_vm.localValue[index][key],callback:function($$v){_vm.$set(_vm.localValue[index],key,$$v)},expression:"localValue[index][key]"}},"component",field,false)):_vm._e()],1)}),_vm._v(" "),_c("td",{class:["k-structure-table-options",{"disabled":_vm.isLast(index)}]},[_c("k-button",{staticClass:"k-structure-table-options-button",attrs:{"tooltip":_vm.$t("remove"),"icon":"remove"},on:{"click":function($event){return _vm.removeItem(index)}}})],1)],2)}),0)],1)],2)};var staticRenderFns=[];return{render:render,staticRenderFns:staticRenderFns,_compiled:true,_scopeId:null,functional:undefined}}());panel.plugin("sylvainjule/multilist",{fields:{multilist:d}});})();